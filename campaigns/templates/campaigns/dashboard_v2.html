<html lang="es">
  <head>
    <meta charset="utf-8" />
    <title>Dashboard v2</title>
    <style>
      :root {
        color-scheme: light;
      }
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        font-family: "Inter", "Segoe UI", sans-serif;
        background: #f6f7fb;
        color: #1f2937;
      }
      .shell {
        min-height: 100vh;
        display: flex;
        gap: 0;
      }
      .sidebar {
        position: fixed;
        top: 0;
        bottom: 0;
        left: 0;
        width: 82px;
        background: #ffffff;
        border-right: 1px solid #e5e7eb;
        display: flex;
        flex-direction: column;
        padding: 18px 14px;
        gap: 18px;
        transition: width 0.2s ease;
        z-index: 2;
        overflow: hidden;
      }
      .sidebar.expanded {
        width: 230px;
      }
      .brand {
        display: flex;
        align-items: center;
        gap: 10px;
        font-weight: 700;
        color: #2563eb;
        font-size: 16px;
        width: 100%;
        justify-content: center;
      }
      .sidebar.expanded .brand {
        justify-content: flex-start;
      }
      .brand-icon {
        width: 34px;
        height: 34px;
        border-radius: 50%;
        border: 2px solid #2563eb;
        display: grid;
        place-items: center;
        font-size: 16px;
      }
      .footer-item {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 8px 10px;
        border-radius: 999px;
        border: 1px solid #e5e7eb;
        background: #ffffff;
        color: #6b7280;
        font-size: 12px;
        font-weight: 600;
        cursor: pointer;
        text-decoration: none;
      }
      .footer-item svg {
        width: 18px;
        height: 18px;
        stroke: currentColor;
        fill: none;
        stroke-width: 1.8;
      }
      .sidebar:not(.expanded) .footer-item {
        justify-content: center;
        padding: 8px 0;
        width: 32px;
        height: 32px;
      }
      .nav {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }
      .nav-item {
        display: flex;
        align-items: center;
        gap: 12px;
        border-radius: 14px;
        padding: 10px 12px;
        color: #1f2937;
        text-decoration: none;
        font-size: 13px;
        font-weight: 600;
        border: 1px solid transparent;
      }
      .sidebar:not(.expanded) .nav-item {
        justify-content: center;
        padding: 10px 0;
      }
      .nav-item svg {
        width: 20px;
        height: 20px;
        stroke: currentColor;
        fill: none;
        stroke-width: 1.8;
      }
      .nav-item.active {
        background: #eaf1ff;
        border-color: #c7dcff;
        color: #1d4ed8;
      }
      .nav-label {
        white-space: nowrap;
        opacity: 0;
        transform: translateX(-6px);
        transition: opacity 0.2s ease, transform 0.2s ease;
      }
      .sidebar:not(.expanded) .nav-label,
      .sidebar:not(.expanded) .brand span {
        display: none;
      }
      .sidebar.expanded .nav-label,
      .sidebar.expanded .brand span {
        opacity: 1;
        transform: translateX(0);
      }
      .brand span {
        opacity: 0;
        transform: translateX(-6px);
        transition: opacity 0.2s ease, transform 0.2s ease;
      }
      .nav-footer {
        margin-top: auto;
        display: flex;
        flex-direction: column;
        gap: 12px;
      }
      .sidebar:not(.expanded) .nav-footer {
        align-items: center;
      }
      .footer-label {
        white-space: nowrap;
      }
      .sidebar:not(.expanded) .footer-label {
        display: none;
      }
      .main {
        flex: 1;
        margin-left: 82px;
        display: flex;
        flex-direction: column;
        min-height: 100vh;
      }
      .sidebar.expanded ~ .main {
        margin-left: 230px;
      }
      .header {
        position: sticky;
        top: 0;
        z-index: 1;
        background: #f6f7fb;
        padding: 18px 28px 12px;
        border-bottom: 1px solid #e5e7eb;
      }
      .header-row {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 18px;
      }
      .header-title {
        display: flex;
        align-items: center;
        gap: 12px;
      }
      .header h1 {
        margin: 0;
        font-size: 20px;
        font-weight: 700;
      }
      .header p {
        margin: 4px 0 0;
        font-size: 12px;
        color: #6b7280;
      }
      .header-actions {
        display: flex;
        align-items: center;
        gap: 10px;
        font-size: 12px;
        color: #4b5563;
      }
      .pill {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 6px 12px;
        border-radius: 999px;
        background: #ffffff;
        border: 1px solid #e5e7eb;
        font-weight: 600;
        color: #111827;
      }
      .content {
        flex: 1;
        padding: 18px 28px 32px;
      }
      .content-grid {
        display: grid;
        grid-template-columns: 260px 1fr;
        gap: 18px;
      }
      .panel {
        background: #ffffff;
        border: 1px solid #e5e7eb;
        border-radius: 16px;
        padding: 14px;
        box-shadow: 0 10px 24px rgba(15, 23, 42, 0.04);
      }
      .search {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 10px 12px;
        border-radius: 12px;
        border: 1px solid #e5e7eb;
        background: #f9fafb;
        font-size: 12px;
        color: #6b7280;
        margin-bottom: 12px;
      }
      .search svg {
        width: 16px;
        height: 16px;
        stroke: currentColor;
        fill: none;
        stroke-width: 1.8;
      }
      .search input {
        border: none;
        outline: none;
        background: transparent;
        flex: 1;
        font-size: 12px;
        color: #111827;
      }
      .campaign-list {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }
      .campaign-card {
        display: flex;
        gap: 12px;
        align-items: center;
        padding: 10px 12px;
        border-radius: 14px;
        border: 1px solid #e5e7eb;
        text-decoration: none;
        color: inherit;
        background: #ffffff;
      }
      .campaign-card.active {
        border-color: #c7dcff;
        background: #eaf1ff;
        color: #1d4ed8;
      }
      .campaign-avatar {
        width: 36px;
        height: 36px;
        border-radius: 12px;
        display: grid;
        place-items: center;
        background: #f3f4f6;
        color: #111827;
        font-weight: 700;
      }
      .campaign-name {
        font-size: 13px;
        font-weight: 600;
      }
      .campaign-meta {
        font-size: 11px;
        color: #9ca3af;
      }
      .detail-header {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 14px;
      }
      .detail-icon {
        width: 42px;
        height: 42px;
        border-radius: 14px;
        background: #eaf1ff;
        color: #1d4ed8;
        display: grid;
        place-items: center;
        font-weight: 700;
      }
      .detail-title {
        font-size: 16px;
        font-weight: 700;
        margin: 0;
      }
      .detail-menu {
        display: flex;
        gap: 16px;
        border-bottom: 1px solid #e5e7eb;
        padding-bottom: 10px;
        margin-bottom: 16px;
        font-size: 12px;
        font-weight: 600;
        color: #6b7280;
      }
      .detail-menu a {
        text-decoration: none;
        color: inherit;
        padding-bottom: 6px;
        border-bottom: 2px solid transparent;
      }
      .detail-menu a.active {
        color: #1d4ed8;
        border-color: #1d4ed8;
      }
      .summary-row {
        display: flex;
        align-items: center;
        gap: 24px;
        flex-wrap: wrap;
        margin-bottom: 20px;
      }
      .summary-card {
        border: 1px solid #e5e7eb;
        border-radius: 16px;
        padding: 18px;
        display: flex;
        flex-direction: column;
        gap: 6px;
        background: #ffffff;
        max-width: 240px;
      }
      .stat-circles {
        display: flex;
        align-items: center;
        gap: 18px;
        flex: 1;
        flex-wrap: wrap;
      }
      .stat-large {
        display: flex;
        align-items: center;
        gap: 18px;
      }
      .ring {
        --value: 0;
        width: 160px;
        height: 160px;
        border-radius: 50%;
        background: conic-gradient(#2563eb calc(var(--value) * 1%), #e5e7eb 0);
        display: grid;
        place-items: center;
        position: relative;
        transition: box-shadow 0.2s ease, transform 0.2s ease;
      }
      .ring-button {
        border: none;
        background: transparent;
        padding: 0;
        cursor: pointer;
      }
      .ring-button:hover .ring,
      .ring-button:hover .ring-small {
        box-shadow: 0 0 0 6px rgba(37, 99, 235, 0.15);
        transform: scale(1.02);
      }
      .ring-button.active .ring,
      .ring-button.active .ring-small {
        box-shadow: 0 0 0 6px rgba(37, 99, 235, 0.25);
      }
      .ring::before {
        content: "";
        position: absolute;
        inset: 16px;
        background: #ffffff;
        border-radius: 50%;
      }
      .ring-content {
        position: relative;
        z-index: 1;
        text-align: center;
      }
      .ring-content strong {
        display: block;
        font-size: 26px;
        font-weight: 700;
        color: #111827;
      }
      .ring-content span {
        font-size: 12px;
        color: #6b7280;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.08em;
      }
      .ring-info {
        display: flex;
        flex-direction: column;
        gap: 6px;
      }
      .ring-info .percent {
        font-size: 22px;
        font-weight: 700;
        color: #111827;
      }
      .ring-info .label {
        font-size: 12px;
        color: #6b7280;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.08em;
      }
      .ring-small {
        --value: 0;
        width: 92px;
        height: 92px;
        border-radius: 50%;
        background: conic-gradient(#0ea5e9 calc(var(--value) * 1%), #e5e7eb 0);
        display: grid;
        place-items: center;
        position: relative;
        transition: box-shadow 0.2s ease, transform 0.2s ease;
      }
      .ring-small::before {
        content: "";
        position: absolute;
        inset: 10px;
        background: #ffffff;
        border-radius: 50%;
      }
      .ring-small .ring-content strong {
        font-size: 16px;
      }
      .ring-label {
        text-align: center;
        font-size: 11px;
        color: #6b7280;
        font-weight: 600;
        margin-top: 6px;
        text-transform: uppercase;
        letter-spacing: 0.06em;
      }
      .stats-grid {
        display: flex;
        gap: 16px;
        flex-wrap: wrap;
      }
      .recipients-table {
        width: 100%;
        border-collapse: collapse;
        font-size: 12px;
      }
      .recipients-table th,
      .recipients-table td {
        text-align: left;
        padding: 10px 12px;
        border-bottom: 1px solid #e5e7eb;
      }
      .recipients-table th {
        color: #6b7280;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.08em;
        font-size: 11px;
      }
      .status-pill {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 4px 8px;
        border-radius: 999px;
        font-size: 11px;
        font-weight: 600;
        background: #f3f4f6;
        color: #111827;
      }
      .status-pill.active {
        background: #eaf1ff;
        color: #1d4ed8;
      }
      .action-btn {
        border: 1px solid #e5e7eb;
        background: #ffffff;
        border-radius: 10px;
        padding: 6px 10px;
        font-size: 11px;
        font-weight: 600;
        cursor: pointer;
      }
      .modal {
        position: fixed;
        inset: 0;
        background: rgba(15, 23, 42, 0.35);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 50;
        padding: 20px;
      }
      .modal.active {
        display: flex;
      }
      .modal-card {
        background: #ffffff;
        border-radius: 18px;
        padding: 20px;
        width: 100%;
        max-width: 420px;
        box-shadow: 0 20px 40px rgba(15, 23, 42, 0.2);
      }
      .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 16px;
      }
      .modal-header h3 {
        margin: 0;
        font-size: 16px;
      }
      .modal-actions {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-top: 16px;
      }
      .modal-actions button {
        border: 1px solid #e5e7eb;
        background: #f9fafb;
        padding: 8px 12px;
        border-radius: 10px;
        font-size: 12px;
        font-weight: 600;
        cursor: pointer;
      }
      .summary-value {
        font-size: 28px;
        font-weight: 700;
        color: #111827;
      }
      .summary-label {
        font-size: 12px;
        color: #6b7280;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.08em;
      }
      .canvas {
        background: #ffffff;
        border: 1px solid #e5e7eb;
        border-radius: 18px;
        min-height: 70vh;
        box-shadow: 0 10px 25px rgba(15, 23, 42, 0.06);
        position: relative;
        overflow: hidden;
      }
      .canvas-inner {
        position: relative;
        z-index: 1;
        padding: 28px;
      }
      .muted {
        color: #94a3b8;
        font-size: 13px;
      }
    </style>
  </head>
  <body>
    <div class="shell">
      <aside class="sidebar expanded" id="sidebar">
        <div class="brand">
          <div class="brand-icon">∞</div>
          <span>Security</span>
        </div>
        <nav class="nav">
          <a class="nav-item active" data-title="Campañas" href="#">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M4 13h4v7H4z"></path>
              <path d="M10 9h4v11h-4z"></path>
              <path d="M16 5h4v15h-4z"></path>
            </svg>
            <span class="nav-label">Campañas</span>
          </a>
          <a class="nav-item" data-title="Resultados" href="#">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M4 4h16v16H4z"></path>
              <path d="M8 8h8v8H8z"></path>
            </svg>
            <span class="nav-label">Resultados</span>
          </a>
          <a class="nav-item" data-title="Contactos" href="#">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M16 11a4 4 0 1 1-8 0 4 4 0 0 1 8 0z"></path>
              <path d="M4 20a8 8 0 0 1 16 0"></path>
            </svg>
            <span class="nav-label">Contactos</span>
          </a>
          <a class="nav-item" data-title="Reportes" href="#">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M5 4h10l4 4v12H5z"></path>
              <path d="M9 14h6"></path>
              <path d="M9 10h6"></path>
            </svg>
            <span class="nav-label">Reportes</span>
          </a>
        </nav>
        <div class="nav-footer">
          <button class="footer-item" id="toggle" aria-label="Expandir o contraer menú" type="button">
            <svg viewBox="0 0 24 24" aria-hidden="true" class="toggle-icon">
              <path d="M9 6l6 6-6 6"></path>
            </svg>
            <span class="footer-label">Contraer</span>
          </button>
          <a class="footer-item" href="#">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M12 3v2"></path>
              <path d="M12 19v2"></path>
              <path d="M4.9 4.9l1.4 1.4"></path>
              <path d="M17.7 17.7l1.4 1.4"></path>
              <path d="M3 12h2"></path>
              <path d="M19 12h2"></path>
              <path d="M4.9 19.1l1.4-1.4"></path>
              <path d="M17.7 6.3l1.4-1.4"></path>
              <circle cx="12" cy="12" r="3"></circle>
            </svg>
            <span class="footer-label">Configuración</span>
          </a>
          <a class="footer-item" href="#">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M9 6v-1a2 2 0 0 1 2-2h6"></path>
              <path d="M15 6h4v12h-4"></path>
              <path d="M10 12h9"></path>
              <path d="M7 9l-3 3 3 3"></path>
            </svg>
            <span class="footer-label">Cerrar sesión</span>
          </a>
        </div>
      </aside>

      <main class="main">
        <header class="header">
          <div class="header-row">
            <div class="header-title">
              <div>
                <h1 id="headerTitle">Campañas</h1>
                <p>Review performance results and more.</p>
              </div>
            </div>
            <div class="header-actions">
              <span class="pill">● Título</span>
              <span>Last 28 days: 27 Jul 2024 - 23 Aug 2024</span>
            </div>
          </div>
        </header>

        <section class="content">
          <div class="content-grid">
            <aside class="panel">
              <form class="search" method="get">
                <svg viewBox="0 0 24 24" aria-hidden="true">
                  <circle cx="11" cy="11" r="7"></circle>
                  <path d="M16.5 16.5L21 21"></path>
                </svg>
                <input type="text" name="q" value="{{ query }}" placeholder="Buscar campaña" />
              </form>
              <div class="campaign-list">
                {% if campaign_list %}
                  {% for campaign in campaign_list %}
                    <a class="campaign-card {% if campaign.is_active %}active{% endif %}"
                       href="?campaign={{ campaign.id }}{% if query %}&q={{ query|urlencode }}{% endif %}">
                      <div class="campaign-avatar">{{ campaign.initials }}</div>
                      <div>
                        <div class="campaign-name">{{ campaign.name }}</div>
                        <div class="campaign-meta">{{ campaign.date_range }}</div>
                      </div>
                    </a>
                  {% endfor %}
                {% else %}
                  <div class="muted">Sin campañas disponibles.</div>
                {% endif %}
              </div>
            </aside>

            <div class="canvas">
              <div class="canvas-inner">
                <div class="detail-header">
                  <div class="detail-icon">{{ selected_campaign_initials }}</div>
                  <div>
                    <p class="detail-title">
                      {% if selected_campaign %}
                        {{ selected_campaign.name }}
                      {% else %}
                        Sin campañas
                      {% endif %}
                    </p>
                    {% if selected_campaign_date %}
                      <div class="campaign-meta">{{ selected_campaign_date }}</div>
                    {% endif %}
                  </div>
                </div>
                <nav class="detail-menu">
                  <a class="active" href="#">Resumen</a>
                  <a href="#">Usuarios</a>
                  <a href="#">Areas</a>
                </nav>
                <div class="summary-row">
                  <div class="summary-card">
                    <div class="summary-value">{{ total_recipients }}</div>
                    <div class="summary-label">Usuarios totales</div>
                  </div>
                  <div class="stat-circles">
                    <div class="stat-large">
                      <button class="ring-button" data-filter="opened" type="button">
                        <div class="ring" style="--value: {{ open_rate }};">
                          <div class="ring-content">
                            <strong>{{ sent_count }}</strong>
                            <span>Enviados</span>
                          </div>
                        </div>
                      </button>
                      <div class="ring-info">
                        <div class="percent">{{ open_rate }}%</div>
                        <div class="label">Abrieron el correo</div>
                        <div class="muted">{{ opened_count }} usuarios</div>
                      </div>
                    </div>
                    <div class="stats-grid">
                      {% for stat in event_stats %}
                        <div>
                          <button class="ring-button" data-filter="{{ stat.key }}" type="button">
                            <div class="ring-small" style="--value: {{ stat.rate }};">
                              <div class="ring-content">
                                <strong>{{ stat.rate }}%</strong>
                              </div>
                            </div>
                          </button>
                          <div class="ring-label">{{ stat.label }}</div>
                        </div>
                      {% endfor %}
                    </div>
                  </div>
                </div>

                <div class="panel">
                  <table class="recipients-table">
                    <thead>
                      <tr>
                        <th>Nombres completos</th>
                        <th>Area</th>
                        <th>Rol</th>
                        <th>Abrio correo</th>
                        <th>Click CTA</th>
                        <th>Submited data</th>
                        <th>Report</th>
                        <th>Accion</th>
                      </tr>
                    </thead>
                    <tbody>
                      {% if recipient_rows %}
                        {% for row in recipient_rows %}
                          <tr data-opened="{{ row.opened|yesno:'yes,no' }}"
                              data-click="{{ row.click|yesno:'yes,no' }}"
                              data-landing="{{ row.landing|yesno:'yes,no' }}"
                              data-cta="{{ row.cta|yesno:'yes,no' }}"
                              data-submit="{{ row.submit|yesno:'yes,no' }}"
                              data-report="{{ row.report|yesno:'yes,no' }}">
                            <td>{{ row.name }}</td>
                            <td>{{ row.area }}</td>
                            <td>{{ row.role }}</td>
                            <td>
                              <span class="status-pill {% if row.opened %}active{% endif %}">
                                {{ row.opened|yesno:"Sí,No" }}
                              </span>
                            </td>
                            <td>
                              <span class="status-pill {% if row.cta %}active{% endif %}">
                                {{ row.cta|yesno:"Sí,No" }}
                              </span>
                            </td>
                            <td>
                              <span class="status-pill {% if row.submit %}active{% endif %}">
                                {{ row.submit|yesno:"Sí,No" }}
                              </span>
                            </td>
                            <td>
                              <span class="status-pill {% if row.report %}active{% endif %}">
                                {{ row.report|yesno:"Sí,No" }}
                              </span>
                            </td>
                            <td>
                              <button class="action-btn"
                                      data-name="{{ row.name }}"
                                      data-area="{{ row.area }}"
                                      data-role="{{ row.role }}"
                                      data-opened="{{ row.opened|yesno:'Sí,No' }}"
                                      data-cta="{{ row.cta|yesno:'Sí,No' }}"
                                      data-submit="{{ row.submit|yesno:'Sí,No' }}"
                                      data-report="{{ row.report|yesno:'Sí,No' }}">
                                Ver
                              </button>
                            </td>
                          </tr>
                        {% endfor %}
                      {% else %}
                        <tr>
                          <td colspan="8" class="muted">Sin usuarios para mostrar.</td>
                        </tr>
                      {% endif %}
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </section>
      </main>
    </div>
    <div class="modal" id="recipientModal" aria-hidden="true">
      <div class="modal-card">
        <div class="modal-header">
          <h3>Detalle del usuario</h3>
          <button class="action-btn" id="modalClose">Cerrar</button>
        </div>
        <div class="muted">Nombre</div>
        <div id="modalName"></div>
        <div class="muted" style="margin-top: 10px;">Area</div>
        <div id="modalArea"></div>
        <div class="muted" style="margin-top: 10px;">Rol</div>
        <div id="modalRole"></div>
        <div class="muted" style="margin-top: 10px;">Abrio correo</div>
        <div id="modalOpened"></div>
        <div class="muted" style="margin-top: 10px;">Click CTA</div>
        <div id="modalCta"></div>
        <div class="muted" style="margin-top: 10px;">Submited data</div>
        <div id="modalSubmit"></div>
        <div class="muted" style="margin-top: 10px;">Report</div>
        <div id="modalReport"></div>
        <div class="modal-actions">
          <button type="button">Notificar</button>
          <button type="button">Programar capacitacion</button>
          <button type="button">Categorizar recurrencia</button>
          <button type="button">Puntaje</button>
        </div>
      </div>
    </div>
    <script>
      const sidebar = document.getElementById("sidebar");
      const toggle = document.getElementById("toggle");
      const headerTitle = document.getElementById("headerTitle");
      const items = document.querySelectorAll(".nav-item");
      const toggleIcon = toggle.querySelector(".toggle-icon");
      const toggleLabel = toggle.querySelector(".footer-label");

      const setToggleState = (isExpanded) => {
        toggleIcon.innerHTML = isExpanded
          ? '<path d="M15 6l-6 6 6 6"></path>'
          : '<path d="M9 6l6 6-6 6"></path>';
        toggleLabel.textContent = isExpanded ? "Contraer" : "Expandir";
      };

      setToggleState(true);

      toggle.addEventListener("click", () => {
        const isExpanded = sidebar.classList.toggle("expanded");
        setToggleState(isExpanded);
      });

      items.forEach((item) => {
        item.addEventListener("click", (event) => {
          event.preventDefault();
          items.forEach((node) => node.classList.remove("active"));
          item.classList.add("active");
          headerTitle.textContent = item.dataset.title || "Campañas";
        });
      });

      const filterButtons = document.querySelectorAll(".ring-button");
      const rows = document.querySelectorAll(".recipients-table tbody tr");
      let activeFilter = null;

      const applyFilter = () => {
        rows.forEach((row) => {
          if (!activeFilter || !row.dataset[activeFilter]) {
            row.style.display = "";
            return;
          }
          row.style.display = row.dataset[activeFilter] === "yes" ? "" : "none";
        });
      };

      filterButtons.forEach((button) => {
        button.addEventListener("click", () => {
          const filter = button.dataset.filter;
          if (activeFilter === filter) {
            activeFilter = null;
          } else {
            activeFilter = filter;
          }
          filterButtons.forEach((btn) => btn.classList.remove("active"));
          if (activeFilter) {
            button.classList.add("active");
          }
          applyFilter();
        });
      });

      const modal = document.getElementById("recipientModal");
      const modalName = document.getElementById("modalName");
      const modalArea = document.getElementById("modalArea");
      const modalRole = document.getElementById("modalRole");
      const modalOpened = document.getElementById("modalOpened");
      const modalCta = document.getElementById("modalCta");
      const modalSubmit = document.getElementById("modalSubmit");
      const modalReport = document.getElementById("modalReport");
      const modalClose = document.getElementById("modalClose");

      document.querySelectorAll(".action-btn").forEach((button) => {
        button.addEventListener("click", () => {
          modalName.textContent = button.dataset.name || "--";
          modalArea.textContent = button.dataset.area || "--";
          modalRole.textContent = button.dataset.role || "--";
          modalOpened.textContent = button.dataset.opened || "--";
          modalCta.textContent = button.dataset.cta || "--";
          modalSubmit.textContent = button.dataset.submit || "--";
          modalReport.textContent = button.dataset.report || "--";
          modal.classList.add("active");
        });
      });

      modalClose.addEventListener("click", () => modal.classList.remove("active"));
      modal.addEventListener("click", (event) => {
        if (event.target === modal) {
          modal.classList.remove("active");
        }
      });
    </script>
  </body>
</html>
